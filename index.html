<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stock Portfolio Risk Analyzer</title>
    <!-- Font Awesome for Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Chart.js for Visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="spinner"></div>
      <div class="loading-text">Analyzing Portfolio...</div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <i class="fas fa-chart-line"></i>
        <span class="sidebar-title">Dashboard</span>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-link active">
          <i class="fas fa-tachometer-alt"></i>
          <span>Overview</span>
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-briefcase"></i>
          <span>Portfolio</span>
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-exclamation-triangle"></i>
          <span>Risk Analysis</span>
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-chart-area"></i>
          <span>Charts</span>
        </a>
        <a href="#" class="nav-link">
          <i class="fas fa-cog"></i>
          <span>Settings</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <span class="version">v1.0.0</span>
      </div>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper">
      <!-- Top Header -->
      <header class="top-header">
        <div class="header-left">
          <button class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
          </button>
          <h1 id="appTitle"><i class="fas fa-chart-line"></i> Stock Portfolio Risk Analyzer</h1>
        </div>
        <div class="header-right">
          <button class="header-btn" id="settingsBtn" title="Settings">
            <i class="fas fa-cog"></i>
          </button>
          <button class="header-btn profile-btn" id="profileBtn" title="Profile">
            <i class="fas fa-user"></i>
            <span class="profile-name" id="profileName">User</span>
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <div class="container">
      <header>
        <h1><i class="fas fa-chart-line"></i> Stock Portfolio Risk Analyzer</h1>
        <p>Educational tool for understanding portfolio risk metrics</p>
      </header>

      <div class="dashboard-grid">
        <!-- Portfolio Input Section -->
        <div class="card portfolio-input" id="section-portfolio">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-briefcase"></i> Portfolio Composition
            </h2>
          </div>
          <div id="stockInputs">
            <!-- Stock rows will be added here -->
          </div>
          <div class="allocation-status valid" id="allocationStatus">
            Total Allocation: 100.00%
          </div>
          <div class="button-group">
            <button
              class="btn btn-outline"
              id="addStockBtn"
              onclick="portfolioAnalyzer.addStockRow()"
            >
              <i class="fas fa-plus"></i> Add Stock
            </button>
            <button
              class="btn btn-primary"
              onclick="portfolioAnalyzer.analyzePortfolio()"
            >
              <i class="fas fa-search-dollar"></i> Analyze Portfolio
            </button>
          </div>
        </div>

        <!-- Risk Metrics -->
        <div class="card full-width" id="section-risk">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-exclamation-triangle"></i> Risk Metrics
            </h2>
          </div>
          <div class="metrics-grid" id="metricsGrid">
            <!-- Metrics will be populated here -->
          </div>
        </div>

        <!-- Correlation Matrix -->
        <div class="card correlation-matrix">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-project-diagram"></i> Correlation Matrix
            </h2>
          </div>
          <div id="correlationMatrix">
            <!-- Correlation table will be here -->
          </div>
        </div>

        <!-- Historical Performance Chart -->
        <div class="card" id="section-charts">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-area"></i> Historical Performance
            </h2>
          </div>
          <div class="chart-container">
            <canvas id="performanceChart"></canvas>
          </div>
        </div>

        <!-- Portfolio Composition Chart -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-pie"></i> Portfolio Allocation
            </h2>
          </div>
          <div class="chart-container">
            <canvas id="allocationChart"></canvas>
          </div>
        </div>

        <!-- Returns Distribution -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-bar"></i> Returns Distribution
            </h2>
          </div>
          <div class="chart-container">
            <canvas id="distributionChart"></canvas>
          </div>
        </div>

        <!-- Drawdown Chart -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-line"></i> Drawdown Analysis
            </h2>
          </div>
          <div class="chart-container">
            <canvas id="drawdownChart"></canvas>
          </div>
        </div>

        <!-- Monte Carlo Simulation -->
        <div class="card full-width" id="section-simulation">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-random"></i> Monte Carlo Simulation (500 runs)
            </h2>
          </div>
          <div class="chart-container" style="height: 400px">
            <canvas id="monteCarloChart"></canvas>
          </div>
          <div class="mc-stats">
            <div class="mc-stat">
              <div class="mc-stat-label">Median Final Value</div>
              <div class="mc-stat-value" id="mcMedian">-</div>
            </div>
            <div class="mc-stat">
              <div class="mc-stat-label">90% CI Lower</div>
              <div class="mc-stat-value" id="mcLower">-</div>
            </div>
            <div class="mc-stat">
              <div class="mc-stat-label">90% CI Upper</div>
              <div class="mc-stat-value" id="mcUpper">-</div>
            </div>
            <div class="mc-stat">
              <div class="mc-stat-label">Probability of Profit</div>
              <div class="mc-stat-value" id="mcProbProfit">-</div>
            </div>
          </div>
        </div>

        <!-- Scenario Analysis -->
        <div class="card scenario-comparison full-width">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-tachometer-alt"></i> Scenario Analysis
            </h2>
          </div>
          <div class="scenario-buttons">
            <button
              class="btn btn-danger scenario-btn"
              onclick="portfolioAnalyzer.applyScenario('techCrash')"
            >
              <i class="fas fa-bolt"></i> Tech Crash (-15%)
            </button>
            <button
              class="btn btn-success scenario-btn"
              onclick="portfolioAnalyzer.applyScenario('marketRally')"
            >
              <i class="fas fa-rocket"></i> Market Rally (+10%)
            </button>
            <button
              class="btn btn-outline scenario-btn"
              onclick="portfolioAnalyzer.applyScenario('volatilitySpike')"
            >
              <i class="fas fa-bolt"></i> Volatility Spike
            </button>
            <button
              class="btn btn-outline scenario-btn"
              onclick="portfolioAnalyzer.resetScenario()"
            >
              <i class="fas fa-undo"></i> Reset
            </button>
          </div>
          <div id="scenarioComparison">
            <p style="color: var(--text-secondary); text-align: center">
              Click a scenario to see impact analysis
            </p>
          </div>
        </div>

        <!-- Risk Summary -->
        <div class="card risk-summary full-width">
          <h2 class="card-title">Portfolio Risk Assessment</h2>
          <div class="risk-level" id="riskLevel">Moderate Risk</div>
          <p
            id="riskDescription"
            style="
              color: var(--text-secondary);
              max-width: 600px;
              margin: 0 auto;
            "
          >
            Based on VaR and volatility metrics, this portfolio has moderate
            risk characteristics.
          </p>
          <div class="benchmark-comparison">
            <h3 style="color: var(--text-secondary); margin-bottom: 15px">
              vs S&P 500 Benchmark
            </h3>
            <div class="metrics-grid" id="benchmarkComparison">
              <!-- Benchmark comparison will be here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2><i class="fas fa-user-circle"></i> User Profile</h2>
          <button class="modal-close" id="closeProfileModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="profile-header-section">
            <div class="profile-avatar">
              <i class="fas fa-user"></i>
            </div>
            <div class="profile-info">
              <h3 id="displayUserName">User</h3>
              <p id="displayUserEmail">user@example.com</p>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="userNameInput"><i class="fas fa-user"></i> Full Name</label>
              <input type="text" id="userNameInput" placeholder="Enter your name" value="User">
            </div>
            <div class="form-group">
              <label for="userEmailInput"><i class="fas fa-envelope"></i> Email Address</label>
              <input type="email" id="userEmailInput" placeholder="Enter your email" value="user@example.com">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="userPhoneInput"><i class="fas fa-phone"></i> Phone Number</label>
              <input type="tel" id="userPhoneInput" placeholder="Enter phone number" value="">
            </div>
            <div class="form-group">
              <label for="userAddressInput"><i class="fas fa-map-marker-alt"></i> Address</label>
              <input type="text" id="userAddressInput" placeholder="Enter your address" value="">
            </div>
          </div>
          <div class="form-group">
            <label for="userCompanyInput"><i class="fas fa-building"></i> Company / Organization</label>
            <input type="text" id="userCompanyInput" placeholder="Enter company name" value="">
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" id="cancelProfile">Cancel</button>
          <button class="btn btn-primary" id="saveProfile">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2><i class="fas fa-cog"></i> Settings</h2>
          <button class="modal-close" id="closeSettingsModal">&times;</button>
        </div>
        <div class="modal-body">
          <!-- App Settings -->
          <div class="settings-section">
            <h3><i class="fas fa-application"></i> Application Settings</h3>
            <div class="form-group">
              <label for="appNameInput"><i class="fas fa-heading"></i> App Name</label>
              <input type="text" id="appNameInput" placeholder="Enter app name" value="Stock Portfolio Risk Analyzer">
            </div>
          </div>
          
          <!-- Display Settings -->
          <div class="settings-section">
            <h3><i class="fas fa-display"></i> Display Settings</h3>
            <div class="form-group">
              <label><i class="fas fa-moon"></i> Theme</label>
              <select id="themeSelect" class="settings-select">
                <option value="dark">Dark Mode</option>
                <option value="light">Light Mode</option>
                <option value="auto">Auto (System)</option>
              </select>
            </div>
            <div class="form-group">
              <label><i class="fas fa-chart-bar"></i> Default Chart Type</label>
              <select id="chartTypeSelect" class="settings-select">
                <option value="line">Line Chart</option>
                <option value="bar">Bar Chart</option>
                <option value="area">Area Chart</option>
              </select>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="showAnimations" checked>
                <span class="checkmark"></span>
                Enable Animations
              </label>
            </div>
          </div>
          
          <!-- Analysis Settings -->
          <div class="settings-section">
            <h3><i class="fas fa-calculator"></i> Analysis Settings</h3>
            <div class="form-group">
              <label for="riskFreeRate"><i class="fas fa-percent"></i> Risk-Free Rate (%)</label>
              <input type="number" id="riskFreeRate" value="3" min="0" max="20" step="0.5">
            </div>
            <div class="form-group">
              <label for="monteCarloRuns"><i class="fas fa-random"></i> Monte Carlo Simulations</label>
              <select id="monteCarloRuns" class="settings-select">
                <option value="100">100 Runs</option>
                <option value="500" selected>500 Runs</option>
                <option value="1000">1000 Runs</option>
              </select>
            </div>
          </div>
          
          <!-- Notification Settings -->
          <div class="settings-section">
            <h3><i class="fas fa-bell"></i> Notifications</h3>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="notifyAnalysis" checked>
                <span class="checkmark"></span>
                Notify when analysis completes
              </label>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="notifyErrors">
                <span class="checkmark"></span>
                Show error notifications
              </label>
            </div>
          </div>
          
          <!-- Data Settings -->
          <div class="settings-section">
            <h3><i class="fas fa-database"></i> Data Settings</h3>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="cacheData" checked>
                <span class="checkmark"></span>
                Cache stock data locally
              </label>
            </div>
            <div class="form-group">
              <button class="btn btn-outline" id="clearCacheBtn">
                <i class="fas fa-trash"></i> Clear Cache
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" id="resetSettingsBtn">
            <i class="fas fa-undo"></i> Reset to Defaults
          </button>
          <button class="btn btn-outline" id="cancelSettings">Cancel</button>
          <button class="btn btn-primary" id="saveSettings">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Custom JavaScript -->
    <script src="script.js"></script>
  </body>
</html>
